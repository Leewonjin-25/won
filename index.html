<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°°ë¦¬ì–´í”„ë¦¬ ë¬¸í™”ê´€ê´‘ ì§€ë„</title>
    
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=YOUR_KAKAO_APP_KEY&libraries=services"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    
    <style>
        :root {
            --primary-color: #4A90E2;
            --secondary-color: #2ECC71;
            --bg-color: #f4f7f6;
        }

        body {
            font-family: 'Pretendard', -apple-system, sans-serif;
            margin: 0; padding: 20px;
            background-color: var(--bg-color);
        }

        .container {
            max-width: 800px; margin: 0 auto;
            background: white; padding: 20px;
            border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        h1 { text-align: center; color: #333; margin-bottom: 20px; }

        .filter-group { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px; }
        select { flex: 1; min-width: 120px; padding: 10px; border: 1px solid #ddd; border-radius: 6px; }
        
        .search-btn {
            width: 100%; padding: 12px;
            background-color: var(--primary-color);
            color: white; border: none; border-radius: 6px;
            font-weight: bold; cursor: pointer;
        }

        #map { width: 100%; height: 400px; border-radius: 8px; margin-top: 20px; border: 1px solid #eee; }

        /* ëª©ë¡ ì˜ì—­ */
        #list-container { margin-top: 20px; border: 1px solid #eee; border-radius: 8px; overflow: hidden; }
        .place-item {
            padding: 15px 20px; border-bottom: 1px solid #f0f0f0;
            cursor: pointer; transition: background 0.2s;
        }
        .place-item:hover { background-color: #f0f7ff; color: var(--primary-color); }

        /* ë”ë³´ê¸° ë²„íŠ¼ */
        #load-more-btn {
            width: 100%; padding: 10px;
            background-color: #fff; color: #666;
            border: none; border-top: 1px solid #eee;
            cursor: pointer; display: none; /* ê²°ê³¼ê°€ ìˆì„ ë•Œë§Œ í‘œì‹œ */
        }
        #load-more-btn:hover { background-color: #f9f9f9; }

        /* ê³„íší‘œ ë§Œë“¤ê¸° ë²„íŠ¼ ì „ìš© ì˜ì—­ */
        .action-group { margin-top: 20px; text-align: center; }
        .plan-btn {
            width: 100%; padding: 15px;
            background-color: var(--secondary-color);
            color: white; border: none; border-radius: 6px;
            font-size: 16px; font-weight: bold; cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .plan-btn:hover { background-color: #27ae60; }

        .guide { text-align: center; color: #888; padding: 30px; }
    </style>
</head>
<body>

    <div class="container">
        <h1>â™¿ ë°°ë¦¬ì–´í”„ë¦¬ ë¬¸í™”ê´€ê´‘ íƒë°©</h1>
        
        <div class="filter-group">
            <select id="sidoSelect" onchange="updateGugun()"><option value="">ì‹œ/ë„ ì„ íƒ</option></select>
            <select id="gugunSelect"><option value="">ì‹œ/êµ°/êµ¬ ì„ íƒ</option></select>
            <select id="cat1Select"><option value="">ëŒ€ë¶„ë¥˜</option></select>
            <select id="cat2Select"><option value="">ì¤‘ë¶„ë¥˜</option></select>
            <button onclick="handleSearch()" class="search-btn">ì¡°íšŒí•˜ê¸°</button>
        </div>

        <div id="map"></div>

        <div id="list-container">
            <div id="info-list">
                <p class="guide">ì¡°íšŒí•˜ê¸° ë²„íŠ¼ì„ ëˆŒëŸ¬ ê´€ê´‘ì§€ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>
            </div
                <button onclick="searchPlaces()" class="search-btn">ì¡°íšŒí•˜ê¸°</button>
            <button id="load-more-btn" onclick="loadMore()">ë”ë³´ê¸° â–¾</button>
        </div>

        <div class="action-group">
            <button onclick="goToPlanner()" class="plan-btn">ğŸ—“ï¸ ë‚˜ë§Œì˜ ì—¬í–‰ ê³„íší‘œ ë§Œë“¤ê¸°</button>
        </div>
    </div>

    <script>
        // --- ìŠ¤í¬ë¦½íŠ¸ í•µì‹¬ ë¡œì§ ì˜ˆì‹œ ---
        let allData = []; // ê²€ìƒ‰ëœ ì „ì²´ ë°ì´í„°ë¥¼ ì €ì¥
        let currentIndex = 0; // í˜„ì¬ ë³´ì—¬ì¤€ ë°ì´í„° ê°œìˆ˜
        const PAGE_SIZE = 10; // í•œ ë²ˆì— ë³´ì—¬ì¤„ ê°œìˆ˜

        function handleSearch() {
            // ì‹¤ì œ êµ¬í˜„ ì‹œì—ëŠ” CSVë‚˜ APIì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ allDataì— ë„£ìŠµë‹ˆë‹¤.
            // ì—¬ê¸°ì„œëŠ” ì˜ˆì‹œë¡œ ì„¤ëª…í•©ë‹ˆë‹¤.
            // allData = filteredResults; 
            currentIndex = 0;
            document.getElementById('info-list').innerHTML = '';
            renderNextPage();
        }

        function renderNextPage() {
            const listDiv = document.getElementById('info-list');
            const nextData = allData.slice(currentIndex, currentIndex + PAGE_SIZE);
            
            nextData.forEach(place => {
                const item = document.createElement('div');
                item.className = 'place-item';
                item.innerText = place.title;
                item.onclick = () => moveToLocation(place.lat, place.lng);
                listDiv.appendChild(item);
            });

            currentIndex += PAGE_SIZE;

            // ë”ë³´ê¸° ë²„íŠ¼ í‘œì‹œ ì—¬ë¶€ ì œì–´
            const btn = document.getElementById('load-more-btn');
            if (currentIndex < allData.length) {
                btn.style.display = 'block';
            } else {
                btn.style.display = 'none';
            }
        }

        function loadMore() {
            renderNextPage();
        }

        function goToPlanner() {
            alert('ê³„íší‘œ ë§Œë“¤ê¸° í˜ì´ì§€ë¡œ ì´ë™í•˜ê±°ë‚˜ íŒì—…ì„ ë„ì›ë‹ˆë‹¤.');
            // window.location.href = 'planner.html'; // ì‹¤ì œ ì´ë™ ì‹œ ì‚¬ìš©
        }

        // ì§€ë„ ì´ë™ í•¨ìˆ˜ (ê¸°ì¡´ ë¡œì§ ìœ ì§€)
        function moveToLocation(lat, lng) {
            if(typeof map !== 'undefined') {
                map.panTo(new kakao.maps.LatLng(lat, lng));
            }
        }
    </script>
    <script src="script.js"></script>
</body>
</html>
